// Ultra Glass Design System - Southwest Mushrooms Premium Theme
// Core glass morphism effects and design tokens

// Glass effect presets
$glass-presets: (
  'subtle': (
    blur: 10px,
    opacity: 0.6,
    tint: rgba(255, 255, 255, 0.1)
  ),
  'standard': (
    blur: 20px,
    opacity: 0.7,
    tint: rgba(255, 255, 255, 0.15)
  ),
  'intense': (
    blur: 40px,
    opacity: 0.8,
    tint: rgba(255, 255, 255, 0.2)
  ),
  'ultra': (
    blur: 60px,
    opacity: 0.85,
    tint: rgba(255, 255, 255, 0.25)
  )
);

// Animation curves
$easings: (
  'glass-in': cubic-bezier(0.4, 0, 0.2, 1),
  'glass-out': cubic-bezier(0.4, 0, 0.6, 1),
  'bounce': cubic-bezier(0.68, -0.55, 0.265, 1.55),
  'smooth': cubic-bezier(0.4, 0, 0.2, 1)
);

// Spacing system
$space: (
  'micro': clamp(0.25rem, 1vw, 0.5rem),
  'tiny': clamp(0.5rem, 1.5vw, 0.75rem),
  'small': clamp(0.75rem, 2vw, 1rem),
  'medium': clamp(1rem, 3vw, 1.5rem),
  'large': clamp(1.5rem, 4vw, 2rem),
  'huge': clamp(2rem, 5vw, 3rem),
  'mega': clamp(3rem, 6vw, 4rem)
);

// Fluid type scale
$type-scale: (
  'hero': clamp(2.5rem, 5vw + 1rem, 4rem),
  'h1': clamp(2rem, 4vw + 0.5rem, 3rem),
  'h2': clamp(1.5rem, 3vw + 0.5rem, 2.25rem),
  'h3': clamp(1.25rem, 2.5vw + 0.5rem, 1.75rem),
  'body': clamp(1rem, 1.5vw + 0.5rem, 1.125rem),
  'small': clamp(0.875rem, 1vw + 0.5rem, 1rem)
);

// Core glass mixin with performance optimization
@mixin ultra-glass($level: 'standard', $shape: null) {
  // Performance: Use will-change for smooth animations
  will-change: transform, backdrop-filter;
  
  // Base glass effect
  @if map-has-key($glass-presets, $level) {
    $preset: map-get($glass-presets, $level);
    backdrop-filter: blur(map-get($preset, 'blur')) saturate(180%);
    -webkit-backdrop-filter: blur(map-get($preset, 'blur')) saturate(180%);
    background: linear-gradient(
      135deg,
      map-get($preset, 'tint') 0%,
      rgba(255, 255, 255, 0.05) 100%
    );
  }
  
  // Glass border with glow
  position: relative;
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: if($shape, $shape, 1rem);
  
  // Subtle inner glow
  box-shadow: 
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    0 8px 32px rgba(31, 38, 135, 0.15);
  
  // Shimmer effect on hover
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.5s ease;
    pointer-events: none;
  }
  
  &:hover::before {
    left: 100%;
  }
}

// Animated glass orb
@mixin glass-orb($size: 60px, $glow-color: rgba(255, 255, 255, 0.3)) {
  width: $size;
  height: $size;
  border-radius: 50%;
  @include ultra-glass('intense', 50%);
  
  // Pulsing glow animation
  &::after {
    content: '';
    position: absolute;
    inset: -10px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      $glow-color 0%,
      transparent 70%
    );
    animation: pulse-glow 2s ease-in-out infinite;
  }
}

// Micro-interaction mixins
@mixin glass-ripple {
  &::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background: radial-gradient(
      circle,
      rgba(255, 255, 255, 0.3) 0%,
      transparent 70%
    );
    transform: scale(0);
    opacity: 0;
  }
  
  &:active::after {
    animation: ripple 0.6s ease-out;
  }
}

@mixin magnetic-hover {
  transition: transform 0.3s map-get($easings, 'smooth');
  
  &:hover {
    transform: translate(
      calc(var(--mouse-x) * 0.1),
      calc(var(--mouse-y) * 0.1)
    );
  }
}

// Animations
@keyframes pulse-glow {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.1); }
}

@keyframes ripple {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

// Glass loading states
@mixin glass-skeleton {
  @include ultra-glass('subtle');
  position: relative;
  overflow: hidden;
  
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      transparent
    );
    animation: shimmer 2s infinite;
  }
}

@keyframes shimmer {
  to { left: 100%; }
}

// Performance-based feature detection
@supports (backdrop-filter: blur(10px)) {
  .enhanced-glass {
    @include ultra-glass('standard');
  }
}

@supports not (backdrop-filter: blur(10px)) {
  .enhanced-glass {
    // Fallback for browsers without backdrop-filter
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
  }
} 