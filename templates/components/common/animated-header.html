{{!
  ANIMATED SWM HEADER COMPONENT
  Beautiful animated header with Southwest Mushrooms branding
  Features smooth animations, scroll effects, and responsive design
}}

<header class="swm-header" id="swm-header">
    <div class="swm-header__container">
        <!-- Animated Logo Section -->
        <div class="swm-header__logo">
            <a href="/" class="swm-logo-link" aria-label="Southwest Mushrooms - Home">
                <div class="swm-logo-container">
                    <img src="{{cdn 'swm-header.svg'}}" 
                         alt="Southwest Mushrooms" 
                         class="swm-header-svg"
                         loading="eager">
                    
                    <!-- Animated background effect -->
                    <div class="swm-logo-bg-effect"></div>
                </div>
            </a>
        </div>
        
        <!-- Navigation Menu -->
        <nav class="swm-header__nav" role="navigation" aria-label="Main navigation">
            <ul class="swm-nav-list">
                <li class="swm-nav-item">
                    <a href="/cultures/" class="swm-nav-link" data-nav="cultures">
                        <span class="nav-text">Cultures</span>
                        <span class="nav-underline"></span>
                    </a>
                </li>
                <li class="swm-nav-item">
                    <a href="/mushroom-grow-kits/" class="swm-nav-link" data-nav="grow-kits">
                        <span class="nav-text">Grow Kits</span>
                        <span class="nav-underline"></span>
                    </a>
                </li>
                <li class="swm-nav-item">
                    <a href="/dried-mushrooms/" class="swm-nav-link" data-nav="dried">
                        <span class="nav-text">Dried</span>
                        <span class="nav-underline"></span>
                    </a>
                </li>
                <li class="swm-nav-item">
                    <a href="/tinctures/" class="swm-nav-link" data-nav="tinctures">
                        <span class="nav-text">Tinctures</span>
                        <span class="nav-underline"></span>
                    </a>
                </li>
                <li class="swm-nav-item">
                    <a href="/equipment/" class="swm-nav-link" data-nav="equipment">
                        <span class="nav-text">Equipment</span>
                        <span class="nav-underline"></span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Header Actions -->
        <div class="swm-header__actions">
            <!-- Search Toggle -->
            <button class="swm-header-btn swm-header-btn--search" 
                    type="button"
                    aria-label="Search products"
                    data-search-toggle>
                <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                </span>
            </button>
            
            <!-- Account -->
            <a href="/account/" class="swm-header-btn swm-header-btn--account" 
               aria-label="My account">
                <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </span>
            </a>
            
            <!-- Cart -->
            <a href="/cart/" class="swm-header-btn swm-header-btn--cart" 
               aria-label="Shopping cart">
                <span class="btn-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"/>
                        <circle cx="20" cy="21" r="1"/>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                    </svg>
                </span>
                <span class="cart-count" data-cart-count="0">0</span>
            </a>
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button class="swm-header__mobile-toggle" 
                type="button"
                aria-label="Toggle mobile menu"
                aria-expanded="false"
                data-mobile-toggle>
            <span class="mobile-toggle-line"></span>
            <span class="mobile-toggle-line"></span>
            <span class="mobile-toggle-line"></span>
        </button>
    </div>
    
    <!-- Search Overlay -->
    <div class="swm-header__search-overlay" data-search-overlay>
        <div class="search-overlay-content">
            <form class="search-form" action="/search" method="get">
                <input type="search" 
                       name="search_query" 
                       placeholder="Search mushrooms, kits, and more..."
                       class="search-input"
                       aria-label="Search products">
                <button type="submit" class="search-submit" aria-label="Search">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                </button>
            </form>
            <button class="search-close" data-search-close aria-label="Close search">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
    </div>
</header>

<script>
// SWM Header JavaScript
(function() {
    'use strict';
    
    const SWMHeader = {
        header: null,
        searchOverlay: null,
        mobileToggle: null,
        
        init() {
            this.header = document.getElementById('swm-header');
            this.searchOverlay = document.querySelector('[data-search-overlay]');
            this.mobileToggle = document.querySelector('[data-mobile-toggle]');
            
            this.bindEvents();
            this.initScrollEffects();
        },
        
        bindEvents() {
            // Search toggle
            const searchToggle = document.querySelector('[data-search-toggle]');
            const searchClose = document.querySelector('[data-search-close]');
            
            if (searchToggle) {
                searchToggle.addEventListener('click', () => this.toggleSearch());
            }
            
            if (searchClose) {
                searchClose.addEventListener('click', () => this.closeSearch());
            }
            
            // Mobile menu toggle
            if (this.mobileToggle) {
                this.mobileToggle.addEventListener('click', () => this.toggleMobileMenu());
            }
            
            // Close search on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    this.closeSearch();
                }
            });
        },
        
        toggleSearch() {
            if (this.searchOverlay) {
                this.searchOverlay.classList.toggle('search-overlay--active');
                const input = this.searchOverlay.querySelector('.search-input');
                if (input) input.focus();
            }
        },
        
        closeSearch() {
            if (this.searchOverlay) {
                this.searchOverlay.classList.remove('search-overlay--active');
            }
        },
        
        toggleMobileMenu() {
            if (this.header) {
                this.header.classList.toggle('swm-header--mobile-open');
                const isOpen = this.header.classList.contains('swm-header--mobile-open');
                this.mobileToggle.setAttribute('aria-expanded', isOpen);
            }
        },
        
        initScrollEffects() {
            let lastScrollY = window.scrollY;
            
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                
                if (this.header) {
                    // Add scrolled class
                    this.header.classList.toggle('swm-header--scrolled', currentScrollY > 50);
                    
                    // Hide/show header on scroll
                    if (currentScrollY > lastScrollY && currentScrollY > 100) {
                        this.header.classList.add('swm-header--hidden');
                    } else {
                        this.header.classList.remove('swm-header--hidden');
                    }
                }
                
                lastScrollY = currentScrollY;
            });
        }
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => SWMHeader.init());
    } else {
        SWMHeader.init();
    }
    
    // Expose globally
    window.SWMHeader = SWMHeader;
})();
</script> 